workbox.core.setCacheNameDetails({
  prefix: 'my-pwa',
  suffix: 'v1',
});

// Cache static assets (HTML, JS, CSS)
workbox.routing.registerRoute(
  /\.(js|css|html|json)$/,
  new workbox.strategies.StaleWhileRevalidate()
);

// Cache images with CacheFirst strategy
workbox.routing.registerRoute(
  /\.(?:png|jpg|jpeg|svg|gif)$/,
  new workbox.strategies.CacheFirst({
    cacheName: 'images-cache',
    plugins: [
      new workbox.expiration.ExpirationPlugin({
        maxEntries: 60,
        maxAgeSeconds: 30 * 24 * 60 * 60, // 30 days
      }),
    ],
  })
);

// Cache API calls (e.g., /api/*) with NetworkFirst
workbox.routing.registerRoute(
  /\/api\//,
  new workbox.strategies.NetworkFirst({
    cacheName: 'api-cache',
    plugins: [
      new workbox.expiration.ExpirationPlugin({
        maxEntries: 20,
        maxAgeSeconds: 5 * 60, // 5 minutes
      }),
    ],
  })
);

// Precache all files generated by CRA
self.skipWaiting();
self.clientsClaim();